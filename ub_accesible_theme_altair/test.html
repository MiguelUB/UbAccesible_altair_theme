
<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Vega-Altair Graphic</title>
      <!-- Incluye Vega y Vega-Lite desde CDN -->
      <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
      <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
      <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
   </head>
   </head>
   <body >
      <div class="container mt-5">
         <div class="row">
            <div class="col-md-6">
               <!-- Primer div: Selector -->
               <div class="form-group">
                  <label for="selector">Selecciona una opción:</label>
                  <select class="form-control" id="selector" aria-labelledby="selectorLabel">
                     <option value="option1">Default</option>
                     <option value="option2">category20b</option>
                     <option value="option3">viridis</option>
                  </select>
               </div>
            </div>
         </div>
         <div class="row">
            <div class="col-md-6">
               <div id="chart"></div>
            </div>
         </div>
      </div>
      <!-- Div para mostrar el gráfico -->
      <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
      <script>
         // Especifica tu especificación de Vega-Lite
         var spec = {"$schema": "https://vega.github.io/schema/vega-lite/v5.16.3.json", "config": {"view": {"continuousHeight": 300, "continuousWidth": 300}}, "data": {"name": "data-093ece8c35bb2d41094cfb6138ec810b"}, "datasets": {"data-093ece8c35bb2d41094cfb6138ec810b": [{"site": "University Farm", "variety": "Manchuria", "year": 1931, "yield": 27.0}, {"site": "Waseca", "variety": "Manchuria", "year": 1931, "yield": 48.86667}, {"site": "Morris", "variety": "Manchuria", "year": 1931, "yield": 27.43334}, {"site": "Crookston", "variety": "Manchuria", "year": 1931, "yield": 39.93333}, {"site": "Grand Rapids", "variety": "Manchuria", "year": 1931, "yield": 32.96667}, {"site": "Duluth", "variety": "Manchuria", "year": 1931, "yield": 28.96667}, {"site": "University Farm", "variety": "Glabron", "year": 1931, "yield": 43.06666}, {"site": "Waseca", "variety": "Glabron", "year": 1931, "yield": 55.2}, {"site": "Morris", "variety": "Glabron", "year": 1931, "yield": 28.76667}, {"site": "Crookston", "variety": "Glabron", "year": 1931, "yield": 38.13333}, {"site": "Grand Rapids", "variety": "Glabron", "year": 1931, "yield": 29.13333}, {"site": "Duluth", "variety": "Glabron", "year": 1931, "yield": 29.66667}, {"site": "University Farm", "variety": "Svansota", "year": 1931, "yield": 35.13333}, {"site": "Waseca", "variety": "Svansota", "year": 1931, "yield": 47.33333}, {"site": "Morris", "variety": "Svansota", "year": 1931, "yield": 25.76667}, {"site": "Crookston", "variety": "Svansota", "year": 1931, "yield": 40.46667}, {"site": "Grand Rapids", "variety": "Svansota", "year": 1931, "yield": 29.66667}, {"site": "Duluth", "variety": "Svansota", "year": 1931, "yield": 25.7}, {"site": "University Farm", "variety": "Velvet", "year": 1931, "yield": 39.9}, {"site": "Waseca", "variety": "Velvet", "year": 1931, "yield": 50.23333}, {"site": "Morris", "variety": "Velvet", "year": 1931, "yield": 26.13333}, {"site": "Crookston", "variety": "Velvet", "year": 1931, "yield": 41.33333}, {"site": "Grand Rapids", "variety": "Velvet", "year": 1931, "yield": 23.03333}, {"site": "Duluth", "variety": "Velvet", "year": 1931, "yield": 26.3}, {"site": "University Farm", "variety": "Trebi", "year": 1931, "yield": 36.56666}, {"site": "Waseca", "variety": "Trebi", "year": 1931, "yield": 63.8333}, {"site": "Morris", "variety": "Trebi", "year": 1931, "yield": 43.76667}, {"site": "Crookston", "variety": "Trebi", "year": 1931, "yield": 46.93333}, {"site": "Grand Rapids", "variety": "Trebi", "year": 1931, "yield": 29.76667}, {"site": "Duluth", "variety": "Trebi", "year": 1931, "yield": 33.93333}, {"site": "University Farm", "variety": "No. 457", "year": 1931, "yield": 43.26667}, {"site": "Waseca", "variety": "No. 457", "year": 1931, "yield": 58.1}, {"site": "Morris", "variety": "No. 457", "year": 1931, "yield": 28.7}, {"site": "Crookston", "variety": "No. 457", "year": 1931, "yield": 45.66667}, {"site": "Grand Rapids", "variety": "No. 457", "year": 1931, "yield": 32.16667}, {"site": "Duluth", "variety": "No. 457", "year": 1931, "yield": 33.6}, {"site": "University Farm", "variety": "No. 462", "year": 1931, "yield": 36.6}, {"site": "Waseca", "variety": "No. 462", "year": 1931, "yield": 65.7667}, {"site": "Morris", "variety": "No. 462", "year": 1931, "yield": 30.36667}, {"site": "Crookston", "variety": "No. 462", "year": 1931, "yield": 48.56666}, {"site": "Grand Rapids", "variety": "No. 462", "year": 1931, "yield": 24.93334}, {"site": "Duluth", "variety": "No. 462", "year": 1931, "yield": 28.1}, {"site": "University Farm", "variety": "Peatland", "year": 1931, "yield": 32.76667}, {"site": "Waseca", "variety": "Peatland", "year": 1931, "yield": 48.56666}, {"site": "Morris", "variety": "Peatland", "year": 1931, "yield": 29.86667}, {"site": "Crookston", "variety": "Peatland", "year": 1931, "yield": 41.6}, {"site": "Grand Rapids", "variety": "Peatland", "year": 1931, "yield": 34.7}, {"site": "Duluth", "variety": "Peatland", "year": 1931, "yield": 32.0}, {"site": "University Farm", "variety": "No. 475", "year": 1931, "yield": 24.66667}, {"site": "Waseca", "variety": "No. 475", "year": 1931, "yield": 46.76667}, {"site": "Morris", "variety": "No. 475", "year": 1931, "yield": 22.6}, {"site": "Crookston", "variety": "No. 475", "year": 1931, "yield": 44.1}, {"site": "Grand Rapids", "variety": "No. 475", "year": 1931, "yield": 19.7}, {"site": "Duluth", "variety": "No. 475", "year": 1931, "yield": 33.06666}, {"site": "University Farm", "variety": "Wisconsin No. 38", "year": 1931, "yield": 39.3}, {"site": "Waseca", "variety": "Wisconsin No. 38", "year": 1931, "yield": 58.8}, {"site": "Morris", "variety": "Wisconsin No. 38", "year": 1931, "yield": 29.46667}, {"site": "Crookston", "variety": "Wisconsin No. 38", "year": 1931, "yield": 49.86667}, {"site": "Grand Rapids", "variety": "Wisconsin No. 38", "year": 1931, "yield": 34.46667}, {"site": "Duluth", "variety": "Wisconsin No. 38", "year": 1931, "yield": 31.6}, {"site": "University Farm", "variety": "Manchuria", "year": 1932, "yield": 26.9}, {"site": "Waseca", "variety": "Manchuria", "year": 1932, "yield": 33.46667}, {"site": "Morris", "variety": "Manchuria", "year": 1932, "yield": 34.36666}, {"site": "Crookston", "variety": "Manchuria", "year": 1932, "yield": 32.96667}, {"site": "Grand Rapids", "variety": "Manchuria", "year": 1932, "yield": 22.13333}, {"site": "Duluth", "variety": "Manchuria", "year": 1932, "yield": 22.56667}, {"site": "University Farm", "variety": "Glabron", "year": 1932, "yield": 36.8}, {"site": "Waseca", "variety": "Glabron", "year": 1932, "yield": 37.73333}, {"site": "Morris", "variety": "Glabron", "year": 1932, "yield": 35.13333}, {"site": "Crookston", "variety": "Glabron", "year": 1932, "yield": 26.16667}, {"site": "Grand Rapids", "variety": "Glabron", "year": 1932, "yield": 14.43333}, {"site": "Duluth", "variety": "Glabron", "year": 1932, "yield": 25.86667}, {"site": "University Farm", "variety": "Svansota", "year": 1932, "yield": 27.43334}, {"site": "Waseca", "variety": "Svansota", "year": 1932, "yield": 38.5}, {"site": "Morris", "variety": "Svansota", "year": 1932, "yield": 35.03333}, {"site": "Crookston", "variety": "Svansota", "year": 1932, "yield": 20.63333}, {"site": "Grand Rapids", "variety": "Svansota", "year": 1932, "yield": 16.63333}, {"site": "Duluth", "variety": "Svansota", "year": 1932, "yield": 22.23333}, {"site": "University Farm", "variety": "Velvet", "year": 1932, "yield": 26.8}, {"site": "Waseca", "variety": "Velvet", "year": 1932, "yield": 37.4}, {"site": "Morris", "variety": "Velvet", "year": 1932, "yield": 38.83333}, {"site": "Crookston", "variety": "Velvet", "year": 1932, "yield": 32.06666}, {"site": "Grand Rapids", "variety": "Velvet", "year": 1932, "yield": 32.23333}, {"site": "Duluth", "variety": "Velvet", "year": 1932, "yield": 22.46667}, {"site": "University Farm", "variety": "Trebi", "year": 1932, "yield": 29.06667}, {"site": "Waseca", "variety": "Trebi", "year": 1932, "yield": 49.2333}, {"site": "Morris", "variety": "Trebi", "year": 1932, "yield": 46.63333}, {"site": "Crookston", "variety": "Trebi", "year": 1932, "yield": 41.83333}, {"site": "Grand Rapids", "variety": "Trebi", "year": 1932, "yield": 20.63333}, {"site": "Duluth", "variety": "Trebi", "year": 1932, "yield": 30.6}, {"site": "University Farm", "variety": "No. 457", "year": 1932, "yield": 26.43334}, {"site": "Waseca", "variety": "No. 457", "year": 1932, "yield": 42.2}, {"site": "Morris", "variety": "No. 457", "year": 1932, "yield": 43.53334}, {"site": "Crookston", "variety": "No. 457", "year": 1932, "yield": 34.33333}, {"site": "Grand Rapids", "variety": "No. 457", "year": 1932, "yield": 19.46667}, {"site": "Duluth", "variety": "No. 457", "year": 1932, "yield": 22.7}, {"site": "University Farm", "variety": "No. 462", "year": 1932, "yield": 25.56667}, {"site": "Waseca", "variety": "No. 462", "year": 1932, "yield": 44.7}, {"site": "Morris", "variety": "No. 462", "year": 1932, "yield": 47.0}, {"site": "Crookston", "variety": "No. 462", "year": 1932, "yield": 30.53333}, {"site": "Grand Rapids", "variety": "No. 462", "year": 1932, "yield": 19.9}, {"site": "Duluth", "variety": "No. 462", "year": 1932, "yield": 22.5}, {"site": "University Farm", "variety": "Peatland", "year": 1932, "yield": 28.06667}, {"site": "Waseca", "variety": "Peatland", "year": 1932, "yield": 36.03333}, {"site": "Morris", "variety": "Peatland", "year": 1932, "yield": 43.2}, {"site": "Crookston", "variety": "Peatland", "year": 1932, "yield": 25.23333}, {"site": "Grand Rapids", "variety": "Peatland", "year": 1932, "yield": 26.76667}, {"site": "Duluth", "variety": "Peatland", "year": 1932, "yield": 31.36667}, {"site": "University Farm", "variety": "No. 475", "year": 1932, "yield": 30.0}, {"site": "Waseca", "variety": "No. 475", "year": 1932, "yield": 41.26667}, {"site": "Morris", "variety": "No. 475", "year": 1932, "yield": 44.23333}, {"site": "Crookston", "variety": "No. 475", "year": 1932, "yield": 32.13333}, {"site": "Grand Rapids", "variety": "No. 475", "year": 1932, "yield": 15.23333}, {"site": "Duluth", "variety": "No. 475", "year": 1932, "yield": 27.36667}, {"site": "University Farm", "variety": "Wisconsin No. 38", "year": 1932, "yield": 38.0}, {"site": "Waseca", "variety": "Wisconsin No. 38", "year": 1932, "yield": 58.16667}, {"site": "Morris", "variety": "Wisconsin No. 38", "year": 1932, "yield": 47.16667}, {"site": "Crookston", "variety": "Wisconsin No. 38", "year": 1932, "yield": 35.9}, {"site": "Grand Rapids", "variety": "Wisconsin No. 38", "year": 1932, "yield": 20.66667}, {"site": "Duluth", "variety": "Wisconsin No. 38", "year": 1932, "yield": 29.33333}]}, "encoding": {"color": {"field": "site", "type": "nominal"}, "x": {"aggregate": "sum", "field": "yield", "type": "quantitative"}, "y": {"field": "variety", "type": "nominal"}}, "mark": {"type": "bar"}};
         var defaultScheme = spec.encoding.color.hasOwnProperty('scale') ? spec.encoding.color.scale:
         spec.description = "Esta es una simple descripcion"
         var embedOpt = {"mode": "vega-lite"};
         function showError(el, error){
             el.innerHTML = ('<div style="color:red;">'
                                   + '<p>JavaScript Error: ' + error.message + '</p>'
                                   + "<p>This usually means there's a typo in your chart specification. "
                                   + "See the javascript console for the full traceback.</p>"
                                   + '</div>');
                   throw error;
               }
         const el = document.getElementById('chart');
         
         $(document).ready(function () {
                 // Manejar el cambio en el selector
                 $('#selector').change(function () {
                     // Obtener el valor seleccionado
                     var opcionSeleccionada = $(this).val();
                     console.log(opcionSeleccionada)
         
                     // Realizar acciones según el valor seleccionado
                     switch (opcionSeleccionada) {
                         case 'option1':
                             // Acciones para la opción 1
                             spec.encoding.color.scale=defaultScheme
                             vegaEmbed("#chart", spec, embedOpt).catch(error => showError(el, error));
                             break;
                         case 'option2':
                             // Acciones para la opción 2
                             spec.encoding.color.scale={"scheme":"category20b"}
                             vegaEmbed("#chart", spec, embedOpt).catch(error => showError(el, error));
                             break;
                         case 'option3':
                             // Acciones para la opción 3
                             console.log("Hola3")
                             spec.encoding.color.scale={"scheme":"viridis"}
                             vegaEmbed("#chart", spec, embedOpt).catch(error => showError(el, error));
                             break;
                         default:
                             // Acciones por defecto
                             $('#graficoContainer').html('<p>Contenido por defecto</p>');
                             break;
                     }
                 });
             });
         vegaEmbed("#chart", spec, embedOpt).catch(error => showError(el, error));
         
      </script>
   </body>
</html>
